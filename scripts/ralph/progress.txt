# Ralph Progress Log
Started: 2026-01-28
---

## Codebase Patterns
- **Docker 로그 파일**: 컨테이너 로그를 호스트에 저장 시 `/logs` 디렉토리를 호스트의 `logs/[service]/`에 마운트. Dockerfile에서 `/logs` 디렉토리 생성 필수.
- **Bash 로그 리다이렉션**: 백그라운드 프로세스 로그를 파일과 콘솔에 동시 출력하려면 서브셸 + 파이프 방식 `(cmd 2>&1 | tee -a logfile) &` 사용
- **HuggingFace 캐시**: docker-compose에서 HuggingFace 캐시를 read-only(`:ro`)로 마운트하면 모델 다운로드 불가. 쓰기 가능하게 마운트 필요.
- **Grafana Alloy 로그 파일**: `loki.source.file`은 glob 패턴보다 정확한 파일명을 선호함. 고정 파일명 사용 권장.
- **Loki rate limit**: 동일 스트림에 과도한 로그 발생 시 `429 Too Many Requests` 에러. 모니터링 스택 자체 로그는 drop 처리 필요.

---
